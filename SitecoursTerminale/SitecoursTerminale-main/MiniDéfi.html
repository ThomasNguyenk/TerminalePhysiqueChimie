<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" type="image/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRQphyk9ejUn8W2sQ9h9tofy5rNyUdzq-5HSA&s">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <title>Mini-dÃ©fis Physique-Chimie Interactifs (VueJS)</title>

  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root {
      --card:#fff;--accent:#007bff;--muted:#6c757d;
      --success:#28a745;--error:#dc3545;--text:#212529;--neon:#00bfff;
    }
    *{box-sizing:border-box;scroll-behavior:smooth;}
    body {
      font-family:'Poppins',system-ui,sans-serif;
      margin:0;color:var(--text);
      padding:40px 20px;
      background:url('https://img.freepik.com/photos-gratuite/rendu-3d-lumieres-techno-science-fiction-futuristes-creant-formes-cool-fond-cool_181624-32814.jpg') center/cover fixed;
      min-height:100vh;
    }
    .container{max-width:960px;margin:auto;}
    header{text-align:center;margin-bottom:32px;}
    h1{font-size:2.2rem;color:var(--accent);}
    p{color:var(--muted);font-size:1.02rem;}

    .card{
      background:var(--card);padding:24px;border-radius:14px;
      box-shadow:0 4px 20px rgba(0,0,0,0.1);
    }
    .controls{
      display:flex;gap:12px;justify-content:center;margin-bottom:16px;flex-wrap:wrap;
    }
    button{
      border:none;border-radius:10px;padding:10px 16px;
      cursor:pointer;font-weight:600;transition:0.2s;
    }
    .primary{
      background:linear-gradient(90deg,var(--accent),#38bdf8);
      color:#fff;box-shadow:0 4px 10px rgba(0,123,255,0.3);
    }
    .primary:hover{transform:translateY(-1px);box-shadow:0 6px 15px rgba(0,123,255,0.4);}
    .ghost{
      background:transparent;border:2px solid var(--accent);color:var(--accent);
    }
    .ghost:hover{background:rgba(0,123,255,0.05);}

    #pdfButton{
      margin:20px auto 0;padding:12px 20px;
      background:linear-gradient(90deg,var(--success),#16a34a);
      color:white;border:none;border-radius:10px;cursor:pointer;
      font-weight:700;font-size:1rem;box-shadow:0 0 10px rgba(40,167,69,0.5);
      display:block;
    }
    #pdfButton:hover{transform:scale(1.05);}

    .progress{
      height:16px;background:#e9ecef;border-radius:999px;
      overflow:hidden;margin-bottom:18px;
    }
    .progress-bar{
      height:100%;background:linear-gradient(90deg,var(--accent),var(--success));
      width:0%;transition:width 0.4s ease;
    }

    .item{
      background:var(--card);padding:14px;border-radius:10px;
      margin-bottom:12px;border:1px solid var(--accent);
      box-shadow:0 0 10px var(--neon);transition:0.3s;
    }
    .item:hover{box-shadow:0 0 20px var(--neon);}
    .item-completed{
      opacity:0.7;border-color:var(--success);box-shadow:none;
    }
    .question{font-weight:700;margin-bottom:8px;color:var(--accent);}
    input[type=text]{
      width:100%;padding:10px;border-radius:8px;border:1px solid #ccc;margin-bottom:8px;
    }
    .feedback{font-size:0.95rem;}
    .correct{color:var(--success);}
    .incorrect{color:var(--error);}

    .meta{
      display:flex;justify-content:space-between;gap:12px;
      color:var(--muted);font-size:0.95rem;margin-top:12px;
    }
    .loading-box { text-align: center; color: white; font-size: 1.5rem; margin-top: 50px; }
    .error-box { text-align: center; color: #ff6b6b; background: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px; }

    @media(max-width:680px){.meta{flex-direction:column;align-items:center;}}
  </style>
</head>

<body>
  <div id="app" class="container">

    <header>
      <h1>ðŸ”¬ Mini-dÃ©fis Physique-Chimie</h1>
      <p>RÃ©ponds correctement pour gÃ©nÃ©rer le PDF rÃ©capitulatif de tes rÃ©ponses.</p>
    </header>

    <div v-if="loading" class="loading-box">Chargement des dÃ©fis...</div>
    <div v-if="error" class="error-box">{{ error }}</div>

    <div class="card" v-if="!loading && !error">

      <div class="controls">
        <button :class="mode==='daily' ? 'primary' : 'ghost'" @click="switchMode('daily')">Quotidiens</button>
        <button :class="mode==='weekly' ? 'primary' : 'ghost'" @click="switchMode('weekly')">Hebdomadaires</button>
        <button class="ghost" @click="resetAll">RÃ©initialiser</button>
      </div>

      <div class="progress">
        <div class="progress-bar" :style="{width:progressPercent+'%'}"></div>
      </div>

      <div class="meta">
        <div>Mode : <strong>{{ mode==='daily' ? 'Quotidien' : 'Hebdomadaire' }}</strong></div>
        <div>ComplÃ©tÃ© : <strong>{{ done }}</strong> / {{ total }}</div>
      </div>

      <div class="list">
        <div v-for="q in sortedChallenges"
             :key="q.id"
             :class="['item', isDone(q.id) ? 'item-completed' : '']">

          <div class="question">{{ q.question }}</div>

          <input type="text"
                 v-model="answers[q.id]"
                 :disabled="isDone(q.id)"
                 @keypress.enter="validate(q.id)" />

          <button class="ghost"
                  @click="validate(q.id)"
                  :disabled="isDone(q.id)">
            Valider
          </button>

          <div class="feedback"
               :class="{
                 'correct': isDone(q.id),
                 'incorrect': feedback[q.id]==='âŒ Mauvaise rÃ©ponse'
               }">
            {{ feedback[q.id] }}
          </div>

        </div>
      </div>

      <button id="pdfButton" @click="generateSummary">
        ðŸ“„ TÃ©lÃ©charger le rÃ©capitulatif PDF
      </button>

    </div>
  </div>

  <script>
  const { createApp } = Vue;

Â  // NOUVEAU : Contenu du fichier challenges.json intÃ©grÃ© ici
Â  const CHALLENGE_DATA = {
Â  Â  "daily": [
Â  Â  Â  {
Â  Â  Â  Â  "id": "d1",
Â  Â  Â  Â  "number": 1,
Â  Â  Â  Â  "question": "1. Quelle est la formule de la vitesse moyenne ?",
Â  Â  Â  Â  "answer": "v=d/t"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d2",
Â  Â  Â  Â  "number": 2,
Â  Â  Â  Â  "question": "2. Quelle est la charge de l'Ã©lectron (en valeur absolue) ?",
Â  Â  Â  Â  "answer": "1.6 x 10e-19 C" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d3",
Â  Â  Â  Â  "number": 3,
Â  Â  Â  Â  "question": "3. Formule chimique de l'eau ?",
Â  Â  Â  Â  "answer": "H2O" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d4",
Â  Â  Â  Â  "number": 4,
Â  Â  Â  Â  "question": "4. Symbole du sodium ?",
Â  Â  Â  Â  "answer": "Na"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d5",
Â  Â  Â  Â  "number": 5,
Â  Â  Â  Â  "question": "5. Que mesure une balance ?",
Â  Â  Â  Â  "answer": "la masse"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d6",
Â  Â  Â  Â  "number": 6,
Â  Â  Â  Â  "question": "6. UnitÃ© de lâ€™Ã©nergie ?",
Â  Â  Â  Â  "answer": "Joule" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d7",
Â  Â  Â  Â  "number": 7,
Â  Â  Â  Â  "question": "7. Ã‰tat de la matiÃ¨re le plus dense (pour la plupart des substances) ?",
Â  Â  Â  Â  "answer": "solide"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d8",
Â  Â  Â  Â  "number": 8,
Â  Â  Â  Â  "question": "8. Formule de la pression ?",
Â  Â  Â  Â  "answer": "P=F/S"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d9",
Â  Â  Â  Â  "number": 9,
Â  Â  Â  Â  "question": "9. Symbole chimique de l'oxygÃ¨ne ?",
Â  Â  Â  Â  "answer": "O"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d10",
Â  Â  Â  Â  "number": 10,
Â  Â  Â  Â  "question": "10. UnitÃ© de la puissance ?",
Â  Â  Â  Â  "answer": "Watt" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d11",
Â  Â  Â  Â  "number": 11,
Â  Â  Â  Â  "question": "11. Quelle est l'unitÃ© SI de la quantitÃ© de matiÃ¨re ?",
Â  Â  Â  Â  "answer": "la mole" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d12",
Â  Â  Â  Â  "number": 12,
Â  Â  Â  Â  "question": "12. Quel est le nom de la transformation liquide â†’ gaz ?",
Â  Â  Â  Â  "answer": "vaporisation"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d13",
Â  Â  Â  Â  "number": 13,
Â  Â  Â  Â  "question": "13. Quel est le pH d'une solution neutre Ã  25Â°C ?",
Â  Â  Â  Â  "answer": "pH=7"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d14",
Â  Â  Â  Â  "number": 14,
Â  Â  Â  Â  "question": "14. Laquelle des forces suivantes est une force Ã  distance : Tension, Poids, Friction ?",
Â  Â  Â  Â  "answer": "le poids"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d15",
Â  Â  Â  Â  "number": 15,
Â  Â  Â  Â  "question": "15. Qu'est-ce qu'un ion positif ?",
Â  Â  Â  Â  "answer": "un cation"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d16",
Â  Â  Â  Â  "number": 16,
Â  Â  Â  Â  "question": "16. Quel instrument mesure le courant Ã©lectrique ?",
Â  Â  Â  Â  "answer": "AmpÃ¨remÃ¨tre"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d17",
Â  Â  Â  Â  "number": 17,
Â  Â  Â  Â  "question": "17. L'accÃ©lÃ©ration est-elle un vecteur ou un scalaire ?",
Â  Â  Â  Â  "answer": "un vecteur"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d18",
Â  Â  Â  Â  "number": 18,
Â  Â  Â  Â  "question": "18. Formule de l'Ã©nergie potentielle gravitationnelle ?",
Â  Â  Â  Â  "answer": "Ep=mgh"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d19",
Â  Â  Â  Â  "number": 19,
Â  Â  Â  Â  "question": "19. Combien de neutrons possÃ¨de l'isotope Carbone-12 (Â¹Â²C) ?",
Â  Â  Â  Â  "answer": "6" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d20",
Â  Â  Â  Â  "number": 20,
Â  Â  Â  Â  "question": "20. Comment appelle-t-on le transfert thermique par contact direct de molÃ©cules ?",
Â  Â  Â  Â  "answer": "conduction"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d21",
Â  Â  Â  Â  "number": 21,
Â  Â  Â  Â  "question": "21. L'Ã©nergie cinÃ©tique dÃ©pend-elle de la vitesse ou de la position ?",
Â  Â  Â  Â  "answer": "de la vitesse"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d22",
Â  Â  Â  Â  "number": 22,
Â  Â  Â  Â  "question": "22. Quel est le rÃ´le d'un catalyseur ?",
Â  Â  Â  Â  "answer": "accÃ©lÃ©rer une rÃ©action"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d23",
Â  Â  Â  Â  "number": 23,
Â  Â  Â  Â  "question": "23. Quelle est la couleur de la lumiÃ¨re ayant la plus grande longueur d'onde visible ?",
Â  Â  Â  Â  "answer": "Rouge"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d24",
Â  Â  Â  Â  "number": 24,
Â  Â  Â  Â  "question": "24. L'unitÃ© SI de la quantitÃ© de mouvement est kgÂ·m/s. Est-ce vrai ou faux ?",
Â  Â  Â  Â  "answer": "Vrai"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "d25",
Â  Â  Â  Â  "number": 25,
Â  Â  Â  Â  "question": "25. Quel est le nom de la transformation gaz â†’ liquide ?",
Â  Â  Â  Â  "answer": "liquefaction"
Â  Â  Â  }
Â  Â  ],
Â  Â  "weekly": [
Â  Â  Â  {
Â  Â  Â  Â  "id": "w1",
Â  Â  Â  Â  "number": 1,
Â  Â  Â  Â  "question": "1. L'unitÃ© de mesure de la quantitÃ© de matiÃ¨re dans le systÃ¨me international est :",
Â  Â  Â  Â  "answer": "la mole" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w2",
Â  Â  Â  Â  "number": 2,
Â  Â  Â  Â  "question": "2. Quel est le nom donnÃ© au dÃ©placement orientÃ© de charges Ã©lectriques ?",
Â  Â  Â  Â  "answer": "courant Ã©lectrique"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w3",
Â  Â  Â  Â  "number": 3,
Â  Â  Â  Â  "question": "3. Quel est l'Ã©lÃ©ment qui a 6 protons dans son noyau ?",
Â  Â  Â  Â  "answer": "le carbone" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w4",
Â  Â  Â  Â  "number": 4,
Â  Â  Â  Â  "question": "4. Formule de la loi d'Ohm ?",
Â  Â  Â  Â  "answer": "U=R*I"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w5",
Â  Â  Â  Â  "number": 5,
Â  Â  Â  Â  "question": "5. Nom de l'Ã©nergie stockÃ©e dans une pile ou batterie ?",
Â  Â  Â  Â  "answer": "Ã©nergie chimique"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w6",
Â  Â  Â  Â  "number": 6,
Â  Â  Â  Â  "question": "6. Quelle grandeur physique est mesurÃ©e en Newtons (N) ?",
Â  Â  Â  Â  "answer": "la force" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w7",
Â  Â  Â  Â  "number": 7,
Â  Â  Â  Â  "question": "7. Quelle est l'Ã©quation d'Ã©tat des gaz parfaits ?",
Â  Â  Â  Â  "answer": "PV=nRT" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w8",
Â  Â  Â  Â  "number": 8,
Â  Â  Â  Â  "question": "8. Quelle particule Ã©lÃ©mentaire porte une charge positive dans le noyau ?",
Â  Â  Â  Â  "answer": "le proton"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w9",
Â  Â  Â  Â  "number": 9,
Â  Â  Â  Â  "question": "9. Formule de l'Ã©nergie potentielle de pesanteur ?",
Â  Â  Â  Â  "answer": "Ep=mgh"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w10",
Â  Â  Â  Â  "number": 10,
Â  Â  Â  Â  "question": "10. Quel est l'effet d'une base forte sur le pH ?",
Â  Â  Â  Â  "answer": "le pH augmente"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w11",
Â  Â  Â  Â  "number": 11,
Â  Â  Â  Â  "question": "11. Comment appelle-t-on la dÃ©viation de la lumiÃ¨re en passant d'un milieu Ã  un autre ?",
Â  Â  Â  Â  "answer": "rÃ©fraction"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w12",
Â  Â  Â  Â  "number": 12,
Â  Â  Â  Â  "question": "12. Quel est le nom du groupe fonctionnel -OH en chimie organique ?",
Â  Â  Â  Â  "answer": "groupe hydroxyle"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w13",
Â  Â  Â  Â  "number": 13,
Â  Â  Â  Â  "question": "13. Quelle est l'unitÃ© SI de la rÃ©sistance Ã©lectrique ?",
Â  Â  Â  Â  "answer": "l'Ohm" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w14",
Â  Â  Â  Â  "number": 14,
Â  Â  Â  Â  "question": "14. Ã€ quelle loi de Newton correspond 'tout corps persÃ©vÃ¨re dans son Ã©tat de repos ou de mouvement uniforme' ?",
Â  Â  Â  Â  "answer": "premiÃ¨re loi" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w15",
Â  Â  Â  Â  "number": 15,
Â  Â  Â  Â  "question": "15. Quel est le pH d'une solution acide ?",
Â  Â  Â  Â  "answer": "pH < 7"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w16",
Â  Â  Â  Â  "number": 16,
Â  Â  Â  Â  "question": "16. Quel est le principal moyen de transfert thermique dans les fluides (liquides et gaz) ?",
Â  Â  Â  Â  "answer": "convection"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w17",
Â  Â  Â  Â  "number": 17,
Â  Â  Â  Â  "question": "17. Quel est le phÃ©nomÃ¨ne oÃ¹ la matiÃ¨re passe de solide Ã  gaz directement ?",
Â  Â  Â  Â  "answer": "sublimation"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w18",
Â  Â  Â  Â  "number": 18,
Â  Â  Â  Â  "question": "18. Comment s'appelle une espÃ¨ce chimique capable de capter un proton Hâº ?",
Â  Â  Â  Â  "answer": "une base de BrÃ¸nsted"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w19",
Â  Â  Â  Â  "number": 19,
Â  Â  Â  Â  "question": "19. Quelle est l'unitÃ© de la pression ?",
Â  Â  Â  Â  "answer": "le Pascal" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w20",
Â  Â  Â  Â  "number": 20,
Â  Â  Â  Â  "question": "20. La charge Ã©lectrique d'un atome neutre est :",
Â  Â  Â  Â  "answer": "nulle" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w21",
Â  Â  Â  Â  "number": 21,
Â  Â  Â  Â  "question": "21. Selon la thÃ©orie de Lewis, qu'est-ce qu'une base de Lewis ?",
Â  Â  Â  Â  "answer": "donner une paire d'Ã©lectrons" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w22",
Â  Â  Â  Â  "number": 22,
Â  Â  Â  Â  "question": "22. Qu'est-ce qu'un Ã©lectronÃ©gativitÃ© ?",
Â  Â  Â  Â  "answer": "capacitÃ© dâ€™un atome Ã  attirer les Ã©lectrons" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w23",
Â  Â  Â  Â  "number": 23,
Â  Â  Â  Â  "question": "23. Quelle est la relation entre la pÃ©riode (T) et la frÃ©quence (f) d'une onde ?",
Â  Â  Â  Â  "answer": "T = 1/f"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w24",
Â  Â  Â  Â  "number": 24,
Â  Â  Â  Â  "question": "24. Quel est l'effet d'un champ magnÃ©tique sur une charge Ã©lectrique en mouvement ?",
Â  Â  Â  Â  "answer": "force de Lorentz" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w25",
Â  Â  Â  Â  "number": 25,
Â  Â  Â  Â  "question": "25. L'Ã©nergie dÃ©gagÃ©e par une rÃ©action est appelÃ©e Ã©nergie exothermique ou endothermique ?",
Â  Â  Â  Â  "answer": "exothermique"
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w26",
Â  Â  Â  Â  "number": 26,
Â  Â  Â  Â  "question": "26. Quelle est l'unitÃ© SI de la tension Ã©lectrique ?",
Â  Â  Â  Â  "answer": "le Volt" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w27",
Â  Â  Â  Â  "number": 27,
Â  Â  Â  Â  "question": "27. Quel est le nombre d'Avogadro (approx.) ?",
Â  Â  Â  Â  "answer": "6.022e23" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w28",
Â  Â  Â  Â  "number": 28,
Â  Â  Â  Â  "question": "28. Dans le vide, quelle est la relation entre la vitesse (c), la longueur d'onde (Î») et la frÃ©quence (f) d'une onde Ã©lectromagnÃ©tique ?",
Â  Â  Â  Â  "answer": "c = Î»f" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w29",
Â  Â  Â  Â  "number": 29,
Â  Â  Â  Â  "question": "29. Quel est le nom du composÃ© Câ‚†Hâ‚â‚‚Oâ‚† ?",
Â  Â  Â  Â  "answer": "Glucose" // SimplifiÃ©
Â  Â  Â  },
Â  Â  Â  {
Â  Â  Â  Â  "id": "w30",
Â  Â  Â  Â  "number": 30,
Â  Â  Â  Â  "question": "30. Un corps plongÃ© dans un fluide subit une force verticale vers le haut. Quel est le nom de cette force ?",
Â  Â  Â  Â  "answer": "PoussÃ©e d'ArchimÃ¨de"
Â  Â  Â  }
Â  Â  ]
Â  };

Â createApp({
    data() {
      return {
        loading: false,
        error: null,
        mode: "daily",
        challengesData: CHALLENGE_DATA,
        progress: JSON.parse(localStorage.getItem("pc_progress_vue") || `{"daily":{},"weekly":{}}`),
        feedback: {},
        answers: JSON.parse(localStorage.getItem("pc_answers_vue") || `{}`),
      };
    },
    mounted() {
      // Restaure la progression et les rÃ©ponses sauvegardÃ©es
      if (!this.answers) this.answers = {};
    },
    computed: {
      challenges() { return this.challengesData[this.mode] || []; },
      done() { return Object.keys(this.progress[this.mode]).length; },
      total() { return this.challenges.length; },
      progressPercent() { return this.total === 0 ? 0 : Math.round(this.done / this.total * 100); },
      sortedChallenges() {
        const pending = this.challenges.filter(q => !this.progress[this.mode][q.id]);
        const completed = this.challenges.filter(q => this.progress[this.mode][q.id]);
        return [...pending.sort(() => Math.random() - 0.5), ...completed];
      }
    },
    methods: {
      normalize(s) { 
        if (!s) return "";
        return s.toLowerCase().trim()
                .replace(/\s+/g, "")
                .replace(/(\(|\)|,|'|")/g, "")
                .replace(/[â‚‚Â³â´â»Â¹â¹Î©Î»Ï€]/g, "");
      },
      saveProgress() { localStorage.setItem("pc_progress_vue", JSON.stringify(this.progress)); },
      saveAnswers() { localStorage.setItem("pc_answers_vue", JSON.stringify(this.answers)); },
      isDone(id) { return !!this.progress[this.mode][id]; },
      switchMode(m) { this.mode = m; },
      resetAll() {
        if (confirm("RÃ©initialiser toutes les rÃ©ponses ?")) {
          this.progress = { daily: {}, weekly: {} };
          this.feedback = {};
          this.answers = {};
          this.saveProgress();
          this.saveAnswers();
        }
      },
      validate(id) {
        const q = this.challenges.find(x => x.id === id);
        this.answers[id] = this.answers[id] || "";
        const userAnswer = this.normalize(this.answers[id]);
        const correctAnswer = this.normalize(q.answer);

        if (userAnswer === correctAnswer) {
          this.progress[this.mode][id] = true;
          this.feedback[id] = "âœ… Correct";
        } else {
          this.feedback[id] = "âŒ Mauvaise rÃ©ponse";
        }

        this.saveProgress();
        this.saveAnswers();
      },
      generateSummary() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({orientation:'portrait',unit:'mm',format:'a4'});
        const margin = 15;
        let y = 20;

        const allChallenges = [...this.challengesData.daily, ...this.challengesData.weekly];
        const correctCount = allChallenges.filter(q => this.normalize(this.answers[q.id]||"") === this.normalize(q.answer)).length;
        const incorrectCount = allChallenges.length - correctCount;

        // --- Titre ---
        doc.setFont("helvetica", "bold");
        doc.setFontSize(22);
        doc.text("RÃ©capitulatif Mini-dÃ©fis Physique-Chimie", 105, y, {align:"center"});
        y += 10;

        doc.setFont("helvetica", "normal");
        doc.setFontSize(12);
        doc.text("Date : " + new Date().toLocaleDateString("fr-FR"), margin, y);
        y += 6;
        doc.text(`RÃ©ponses correctes : ${correctCount}`, margin, y);
        y += 6;
        doc.text(`RÃ©ponses incorrectes : ${incorrectCount}`, margin, y);
        y += 10;

        // --- Questions ---
        allChallenges.forEach((q, i) => {
          const answer = this.answers[q.id] || "(non rÃ©pondu)";
          const isCorrect = this.normalize(answer) === this.normalize(q.answer);

          if (y > 270) { doc.addPage(); y = 20; }

          doc.setFont("helvetica", "bold");
          doc.setFontSize(12);
          doc.setTextColor(0,0,0);
          doc.text(`${i + 1}. ${q.question}`, margin, y);
          y += 7;

          doc.setFont("helvetica", "normal");
          doc.setTextColor(isCorrect ? 0 : 220, 0, 0);
          doc.text(`RÃ©ponse de l'Ã©lÃ¨ve : ${answer}`, margin + 5, y);
          y += 6;

          doc.setTextColor(0,128,0);
          doc.text(`Bonne rÃ©ponse : ${q.answer}`, margin + 5, y);
          y += 8;
        });

        doc.save("MiniDefis_Recapitulatif.pdf");
      }
    }
  }).mount("#app");
  </script>
</body>
</html>